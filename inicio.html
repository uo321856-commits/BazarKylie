

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kylie Cosmetics - Facturaci√≥n</title>

  <style>
    :root {
      --rosa: #ff66b2;
      --rosa-claro: #cf7fa8;
      --negro: #000;
      --blanco: #ffffff;
      --gris: #dbd5d5;
      --gris-texto: #eee0e0;
    }

    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(to bottom, #570431, #2c0119);
      margin: 0;
      padding: 20px;
      color: var(--negro);
    }

    header {
      text-align: center;
      border-bottom: 3px solid var(--rosa);
      padding-bottom: 10px;
      margin-bottom: 20px;
    }

    header h1 {
      color: var(--rosa);
      letter-spacing: 1px;
    }

    .container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      max-width: 1200px;
      margin: auto;
    }

    .card {
      background: var(--blanco);
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }

    h2 {
      color: var(--rosa);
      margin-bottom: 10px;
      border-bottom: 2px solid var(--rosa-claro);
      padding-bottom: 5px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }

    th, td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      text-align: center;
    }

    th {
      background-color: var(--rosa-claro);
      color: var(--negro);
    }

    tr:hover {
      background-color: var(--gris);
    }

    .btn {
      background-color: var(--rosa);
      color: var(--blanco);
      border: none;
      border-radius: 6px;
      padding: 8px 14px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }

    .btn:hover {
      background-color: #ff3399;
    }

    input, select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-bottom: 8px;
    }

    .factura {
      margin-top: 15px;
      background-color: var(--gris);
      padding: 15px;
      border-radius: 8px;
    }

    .total {
      text-align: right;
      font-weight: bold;
      color: var(--rosa);
      margin-top: 10px;
    }

    .producto-img {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      object-fit: cover;
    }

    @media (max-width: 900px) {
      .container {
        grid-template-columns: 1fr;
      }
      th, td {
        font-size: 14px;
      }
    }

    /* M√∫sica */
    audio {
      display: block;
      margin: 10px auto 20px;
      width: 60%;
      border-radius: 12px;
    }

    /* Bot√≥n oculto en impresi√≥n */
    @media print {
      button, .btn, form, header, table#tablaProductos, aside h3 {
        display: none !important;
      }
      .factura {
        background: white !important;
        box-shadow: none !important;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Kylie Cosmetics üíÑ</h1>
    <p>Cat√°logo, registro y facturaci√≥n completa</p>
  </header>

  <div class="container">
    <main class="card">
      <h2>üõçÔ∏è Cat√°logo de Productos</h2>
      <a href="inicio.html" class="btn ghost" style="margin-bottom:10px;display:inline-block">‚Üê Volver al inicio</a>
      <table id="tablaProductos">
        <thead>
          <tr>
            <th>Imagen</th>
            <th>Producto</th>
            <th>Categor√≠a</th>
            <th>Precio</th>
            <th>Stock</th>
            <th>A√±adir</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </main>

    <aside class="card">
      <h2>Registro del cliente </h2>
      <div id="carrito"></div>

      <h3 style="color:var(--rosa);margin-top:15px;">üßæ Facturaci√≥n</h3>
      <form id="formularioCliente">
        <input type="text" id="nombre" placeholder="Nombre del cliente">
        <input type="text" id="dni" placeholder="DNI">
        <select id="pago">
          <option value="">Forma de pago</option>
          <option value="Efectivo">Efectivo</option>
          <option value="Tarjeta de cr√©dito">Tarjeta de cr√©dito</option>
          <option value="Tarjeta de d√©bito">Tarjeta de d√©bito</option>
          <option value="Transferencia">Transferencia</option>
        </select>
        <button type="button" class="btn" onclick="generarFactura()">Generar Factura</button>
      </form>

      <div class="factura" id="factura"></div>
    </aside>
  </div>

  <script>
    const productos = [
      { id: "P001", nombre: "Labial Mate Ros√©", categoria: "Labios", precio: 1500, stock: 10, img: "img/labial.jpg" },
      { id: "P002", nombre: "Base L√≠quida Beige", categoria: "Rostro", precio: 2800, stock: 10, img: "img/base.jpg" },
      { id: "P003", nombre: "Sombras Glitter", categoria: "Ojos", precio: 3200, stock: 10, img: "img/sombra.jpg" },
      { id: "P004", nombre: "Rubor en Crema", categoria: "Rostro", precio: 1900, stock: 10, img: "img/rubor.jpg" },
      { id: "P005", nombre: "Iluminador Glow", categoria: "Rostro", precio: 2100, stock: 10, img: "img/iluminador.jpg" },
      { id: "P006", nombre: "Perfume Floral 50ml", categoria: "Fragancia", precio: 5600, stock: 10, img: "img/perfume.jpg" },
      { id: "P007", nombre: "Crema Hidratante", categoria: "Piel", precio: 2400, stock: 10, img: "img/cremus.jpg" },
      { id: "P008", nombre: "Gloss Transparente", categoria: "Labios", precio: 1200, stock: 10, img: "img/gloss.jpg" },
      { id: "P009", nombre: "Bruma", categoria: "Cabello", precio: 1800, stock: 10, img: "img/bruma.jpg" },
      { id: "P010", nombre: "Brochas", categoria: "Ojos", precio: 2500, stock: 10, img: "img/brochus.jpg" },
      { id: "P011", nombre: "Mantequilla Hidratante", categoria: "Rostro", precio: 3100, stock: 10, img: "img/mantequilla.jpg" }
    ];

    const tbody = document.querySelector("#tablaProductos tbody");
    const carritoDiv = document.getElementById("carrito");
    const facturaDiv = document.getElementById("factura");
    let carrito = [];

    function mostrarProductos() {
      tbody.innerHTML = "";
      for (let p of productos) {
        const fila = document.createElement("tr");
        fila.innerHTML = `
          <td><img src="${p.img}" alt="${p.nombre}" class="producto-img"></td>
          <td>${p.nombre}</td>
          <td>${p.categoria}</td>
          <td>$${p.precio}</td>
          <td id="stock-${p.id}">${p.stock}</td>
          <td><button class="btn" onclick="agregarCarrito('${p.id}')">A√±adir</button></td>
        `;
        tbody.appendChild(fila);
      }
    }

    function agregarCarrito(id) {
      const producto = productos.find(p => p.id === id);
      if (producto && producto.stock > 0) {
        producto.stock--;
        const existe = carrito.find(item => item.id === id);
        if (existe) existe.cantidad++;
        else carrito.push({ ...producto, cantidad: 1 });
      }
      mostrarProductos();
      mostrarCarrito();
    }

    function mostrarCarrito() {
      carritoDiv.innerHTML = "";
      if (carrito.length === 0) {
        carritoDiv.innerHTML = "<p>El carrito est√° vac√≠o.</p>";
        return;
      }

      let tabla = "<table><tr><th>Producto</th><th>Cant.</th><th>Subtotal</th></tr>";
      let total = 0;
      for (let item of carrito) {
        const subtotal = item.precio * item.cantidad;
        total += subtotal;
        tabla += `<tr><td>${item.nombre}</td><td>${item.cantidad}</td><td>$${subtotal}</td></tr>`;
      }
      tabla += "</table>";
      tabla += `<p class='total'>Total: $${total}</p>`;
      carritoDiv.innerHTML = tabla;
    }

    function generarFactura() {
      if (carrito.length === 0) {
        alert("Agreg√° productos al carrito primero üíã");
        return;
      }

      const nombre = document.getElementById("nombre").value;
      const dni = document.getElementById("dni").value;
      const pago = document.getElementById("pago").value;

      if (!nombre || !dni || !pago) {
        alert("Complet√° todos los datos del cliente, amor üíó");
        return;
      }

      let detalle = "<table><tr><th>Producto</th><th>Cant.</th><th>Subtotal</th></tr>";
      let total = 0;
      for (let item of carrito) {
        const subtotal = item.precio * item.cantidad;
        total += subtotal;
        detalle += `<tr><td>${item.nombre}</td><td>${item.cantidad}</td><td>$${subtotal}</td></tr>`;
      }
      detalle += "</table>";

      facturaDiv.innerHTML = `
        <h3 style="color:var(--rosa)">Factura Generada</h3>
        <p><b>Cliente:</b> ${nombre}</p>
        <p><b>DNI:</b> ${dni}</p>
        <p><b>Pago:</b> ${pago}</p>
        ${detalle}
        <p class="total">TOTAL FINAL: $${total}</p>
        <button class="btn" onclick="imprimirFactura()">üñ®Ô∏è Imprimir Factura</button>
      `;

      carrito = [];
      mostrarCarrito();
    }

    function imprimirFactura() {
      const contenido = document.getElementById("factura").innerHTML;
      const ventana = window.open("", "PRINT", "height=600,width=800");
      ventana.document.write("<html><head><title>Factura - Kylie Cosmetics</title>");
      ventana.document.write("<style>body{font-family:Arial;padding:20px;}h3{color:#ff66b2;}table{width:100%;border-collapse:collapse;}th,td{border:1px solid #ccc;padding:8px;text-align:center;}th{background:#f8d5e0;}p.total{text-align:right;font-weight:bold;color:#ff66b2;}</style>");
      ventana.document.write("</head><body>");
      ventana.document.write("<h2>Julieta Cosmetics üíÑ</h2>");
      ventana.document.write(contenido);
      ventana.document.write("</body></html>");
      ventana.document.close();
      ventana.print();
    }

    mostrarProductos();
  </script>
</body>
</html>
